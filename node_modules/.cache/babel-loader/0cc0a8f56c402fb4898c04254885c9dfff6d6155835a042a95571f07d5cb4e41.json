{"ast":null,"code":"import \"core-js/modules/esnext.iterator.map.js\";\nimport { ref, watch, onMounted, onBeforeUnmount } from 'vue';\nimport Chart from 'chart.js/auto';\nexport default {\n  props: {\n    entries: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const totalEntries = ref(0);\n    const entriesChart = ref(null);\n    let chartInstance = null; // A Chart példány tárolására\n\n    const createChart = () => {\n      if (chartInstance) {\n        chartInstance.destroy(); // Az előző diagram eltávolítása\n      }\n      if (!entriesChart.value) return; // Ellenőrizzük, hogy a ref elérhető\n\n      const ctx = entriesChart.value.getContext('2d');\n      if (ctx) {\n        chartInstance = new Chart(ctx, {\n          type: 'bar',\n          data: {\n            labels: Object.keys(props.entries),\n            datasets: [{\n              label: 'Bejegyzések száma',\n              data: Object.values(props.entries).map(userEntries => userEntries.length),\n              backgroundColor: '#3c81f6',\n              borderColor: '#3c81f6',\n              borderWidth: 1\n            }]\n          },\n          options: {\n            responsive: true,\n            scales: {\n              y: {\n                beginAtZero: true\n              }\n            }\n          }\n        });\n      }\n    };\n    watch(() => props.entries, newEntries => {\n      totalEntries.value = Object.values(newEntries).flat().length;\n      createChart();\n    }, {\n      immediate: true\n    });\n    onMounted(() => {\n      createChart();\n    });\n\n    // Diagram példány eltávolítása a komponens eltávolítása előtt\n    onBeforeUnmount(() => {\n      if (chartInstance) {\n        chartInstance.destroy();\n      }\n    });\n    return {\n      totalEntries,\n      entriesChart\n    };\n  }\n};","map":{"version":3,"names":["ref","watch","onMounted","onBeforeUnmount","Chart","props","entries","type","Object","required","setup","totalEntries","entriesChart","chartInstance","createChart","destroy","value","ctx","getContext","data","labels","keys","datasets","label","values","map","userEntries","length","backgroundColor","borderColor","borderWidth","options","responsive","scales","y","beginAtZero","newEntries","flat","immediate"],"sources":["/Users/vasadidavid/Desktop/motibro/my-time-tracker/src/components/MyStatistics.vue"],"sourcesContent":["\n// Az alábbi bejegyzés nem készült el \n\n\n<template>\n  <div class=\"mt-6\">\n    <h2 class=\"text-xl font-semibold\">Statisztikák</h2>\n    <div v-if=\"totalEntries > 0\">\n      <p>Összes bejegyzés: {{ totalEntries }}</p>\n      <canvas ref=\"entriesChart\"></canvas>\n    </div>\n    <div v-else>\n      <p>Nincsenek bejegyzések a statisztikákhoz.</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, watch, onMounted, onBeforeUnmount } from 'vue';\nimport Chart from 'chart.js/auto';\n\nexport default {\n  props: {\n    entries: {\n      type: Object,\n      required: true,\n    },\n  },\n  setup(props) {\n    const totalEntries = ref(0);\n    const entriesChart = ref(null);\n    let chartInstance = null; // A Chart példány tárolására\n\n    const createChart = () => {\n      if (chartInstance) {\n        chartInstance.destroy(); // Az előző diagram eltávolítása\n      }\n\n      if (!entriesChart.value) return; // Ellenőrizzük, hogy a ref elérhető\n\n      const ctx = entriesChart.value.getContext('2d');\n      if (ctx) {\n        chartInstance = new Chart(ctx, {\n          type: 'bar',\n          data: {\n            labels: Object.keys(props.entries),\n            datasets: [{\n              label: 'Bejegyzések száma',\n              data: Object.values(props.entries).map(userEntries => userEntries.length),\n              backgroundColor: '#3c81f6',\n              borderColor: '#3c81f6',\n              borderWidth: 1,\n            }],\n          },\n          options: {\n            responsive: true,\n            scales: {\n              y: {\n                beginAtZero: true,\n              },\n            },\n          },\n        });\n      }\n    };\n\n    watch(\n      () => props.entries,\n      (newEntries) => {\n        totalEntries.value = Object.values(newEntries).flat().length;\n        createChart();\n      },\n      { immediate: true }\n    );\n\n    onMounted(() => {\n      createChart();\n    });\n\n    // Diagram példány eltávolítása a komponens eltávolítása előtt\n    onBeforeUnmount(() => {\n      if (chartInstance) {\n        chartInstance.destroy();\n      }\n    });\n\n    return {\n      totalEntries,\n      entriesChart,\n    };\n  },\n};\n</script>\n\n<style scoped>\ncanvas {\n  max-width: 600px;\n  margin: auto;\n}\n</style>\n"],"mappings":";AAkBA,SAASA,GAAG,EAAEC,KAAK,EAAEC,SAAS,EAAEC,eAAc,QAAS,KAAK;AAC5D,OAAOC,KAAI,MAAO,eAAe;AAEjC,eAAe;EACbC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,KAAKA,CAACL,KAAK,EAAE;IACX,MAAMM,YAAW,GAAIX,GAAG,CAAC,CAAC,CAAC;IAC3B,MAAMY,YAAW,GAAIZ,GAAG,CAAC,IAAI,CAAC;IAC9B,IAAIa,aAAY,GAAI,IAAI,EAAE;;IAE1B,MAAMC,WAAU,GAAIA,CAAA,KAAM;MACxB,IAAID,aAAa,EAAE;QACjBA,aAAa,CAACE,OAAO,CAAC,CAAC,EAAE;MAC3B;MAEA,IAAI,CAACH,YAAY,CAACI,KAAK,EAAE,OAAM,CAAE;;MAEjC,MAAMC,GAAE,GAAIL,YAAY,CAACI,KAAK,CAACE,UAAU,CAAC,IAAI,CAAC;MAC/C,IAAID,GAAG,EAAE;QACPJ,aAAY,GAAI,IAAIT,KAAK,CAACa,GAAG,EAAE;UAC7BV,IAAI,EAAE,KAAK;UACXY,IAAI,EAAE;YACJC,MAAM,EAAEZ,MAAM,CAACa,IAAI,CAAChB,KAAK,CAACC,OAAO,CAAC;YAClCgB,QAAQ,EAAE,CAAC;cACTC,KAAK,EAAE,mBAAmB;cAC1BJ,IAAI,EAAEX,MAAM,CAACgB,MAAM,CAACnB,KAAK,CAACC,OAAO,CAAC,CAACmB,GAAG,CAACC,WAAU,IAAKA,WAAW,CAACC,MAAM,CAAC;cACzEC,eAAe,EAAE,SAAS;cAC1BC,WAAW,EAAE,SAAS;cACtBC,WAAW,EAAE;YACf,CAAC;UACH,CAAC;UACDC,OAAO,EAAE;YACPC,UAAU,EAAE,IAAI;YAChBC,MAAM,EAAE;cACNC,CAAC,EAAE;gBACDC,WAAW,EAAE;cACf;YACF;UACF;QACF,CAAC,CAAC;MACJ;IACF,CAAC;IAEDlC,KAAK,CACH,MAAMI,KAAK,CAACC,OAAO,EAClB8B,UAAU,IAAK;MACdzB,YAAY,CAACK,KAAI,GAAIR,MAAM,CAACgB,MAAM,CAACY,UAAU,CAAC,CAACC,IAAI,CAAC,CAAC,CAACV,MAAM;MAC5Db,WAAW,CAAC,CAAC;IACf,CAAC,EACD;MAAEwB,SAAS,EAAE;IAAK,CACpB,CAAC;IAEDpC,SAAS,CAAC,MAAM;MACdY,WAAW,CAAC,CAAC;IACf,CAAC,CAAC;;IAEF;IACAX,eAAe,CAAC,MAAM;MACpB,IAAIU,aAAa,EAAE;QACjBA,aAAa,CAACE,OAAO,CAAC,CAAC;MACzB;IACF,CAAC,CAAC;IAEF,OAAO;MACLJ,YAAY;MACZC;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}